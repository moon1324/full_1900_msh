<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>슬라이드 배너</title>
        <link rel="stylesheet" href="my_banner_2.css" />
    </head>
    <body>
        <div class="wrap">
            <div class="arrow left">
                <img src="arrow.svg" alt="" />
            </div>
            <section class="container">
                <div class="banner">
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/93e02bd6-4eb9-4a43-af19-0161d1799c01.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/d1d93fd8-4c68-48d3-9bad-4cd61ac0bc12.jpeg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/989beab5-a26e-4d0c-bf52-1b30ac1fbb47.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/4d9591da-48f2-4667-9458-7d23307a0e0e.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/4b328fa4-ed09-4d64-adb9-31c5aa9ceb38.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/ff4b6c93-6663-462f-92c9-1f70bed9588d.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/5532422b-ab9b-4e42-a635-5b3968b1c993.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/199846d0-f4c5-45a1-9c65-5fcea31c9f75.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/b121887a-d1ac-4207-8295-167815055931.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/44204eb0-20bb-48f4-84e9-ae6b247c6027.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/86b70230-7d33-4332-8ce4-5eef1684727b.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/40b48995-6512-4a94-a7bf-4a01b47a04b0.jpeg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/8e469ba8-cc9e-4091-be07-ca8c9f7c946d.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/5d3c1e76-a789-456b-be3b-4df9359f06a2.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/56b78003-9fe5-4b52-abb6-290227049797.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://img-cf.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/shop/data/goods/1648208787398l0.jpeg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/7ce08554-ef0e-4d4f-8741-fdfe94330e7f.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/a409be8d-99ef-4420-b78f-ac7aa173da92.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://img-cf.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/shop/data/goods/1581658839274l0.jpg"
                            alt=""
                        />
                    </div>
                    <div class="card">
                        <img
                            src="https://img-cf.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/shop/data/goods/1645596887681l0.jpg"
                            alt=""
                        />
                    </div>
                    <!-- 전체보기 그려보기 -->
                    <!-- <div class="card">
                        <div class="show-all">
                            <a href="">
                                <img src="./gtbutton.svg" alt="" class="icon" />
                                <span>전체보기</span>
                            </a>
                        </div>
                    </div> -->
                </div>
            </section>
            <div class="arrow right">
                <img src="arrow.svg" alt="" />
            </div>
        </div>
        <!-- case2 무한슬라이드를 위한 밑 버튼 -->
        <div class="buttons">
            <button></button>
            <button></button>
            <button></button>
            <button></button>
            <button></button>
        </div>
    </body>
    <script>
        // // case1 원래 오리지널 마켓컬리 상품배너
        // // 마지막배너 (전체보기) 만들기
        // const lastBanner = document.createElement("div");
        // // 배너 불러오기
        // const banner = document.querySelector("div.banner");
        // // 왼쪽, 오른쪽 화살표버튼 불러오기
        // const leftArrow = document.querySelector("div.left");
        // const rightArrow = document.querySelector("div.right");

        // // 카운트 선언
        // let count = 0;

        // // 마지막배너에 전체보기 넣기
        // lastBanner.innerHTML = `
        //         <div class="card">
        //             <div class="show-all">
        //                 <a href="">
        //                     <img src="./gtbutton.svg" alt="" class="icon" />
        //                     <span>전체보기</span>
        //                 </a>
        //             </div>
        //         </div>
        //         `;
        // banner.appendChild(lastBanner);

        // // 초기화면 왼쪽 화살표버튼 display: none
        // leftArrow.style.display = "none";

        // // 왼쪽 슬라이드 함수화
        // let leftSlide = () => {
        //     // (초기화면 바로이전) 2번째 배너에서 왼쪽화살표 클릭하면
        //     if (count === 1) {
        //         // 왼쪽 화살표 비활성화
        //         leftArrow.style.display = "none";
        //         // 카운트감소
        //         count--;
        //         // 0.5초동안 변경
        //         banner.style.transition = `transform 0.5s`;
        //         // 슬라이드 밀기
        //         banner.style.transform = `translate(${-1068 * count}px)`;
        //     } else {
        //         // 그외의 경우
        //         // 카운트 감소
        //         count--;
        //         // 0.5초동안 변경
        //         banner.style.transition = `transform 0.5s`;
        //         // 슬라이드 밀기
        //         banner.style.transform = `translate(${-1068 * count}px)`;
        //         // 오른쪽 화살표 활성화
        //         rightArrow.style.display = "block";
        //     }
        // };

        // // 오른쪽 슬라이드 함수화
        // let rightSlide = () => {
        //     // 전체보기 나오기 이전 마지막 슬라이드때
        //     if (count === 4) {
        //         // 카운트 증가
        //         count++;
        //         // 0.5초동안 변경
        //         banner.style.transition = `transform 0.5s`;
        //         // 슬라이드 한칸만 밀기
        //         banner.style.transform = `translate(${
        //             -1068 * (count - 1) - 267
        //         }px)`;
        //         // 오른쪽 화살표 비활성화
        //         rightArrow.style.display = "none";
        //     } else {
        //         // 카운트 증가
        //         count++;
        //         // 0.5초동안 변경
        //         banner.style.transition = `transform 0.5s`;
        //         // 슬라이드 밀기
        //         banner.style.transform = `translate(${-1068 * count}px)`;
        //         // 왼쪽 화살표 활성화
        //         leftArrow.style.display = "block";
        //     }
        // };

        // // 왼쪽 화살표에 이벤트 걸어서 함수 사용
        // leftArrow.addEventListener("click", (e) => {
        //     leftSlide();
        // });

        // // 오른쪽 화살표에 이벤트 걸어서 함수 사용
        // rightArrow.addEventListener("click", (e) => {
        //     rightSlide();
        // });

        // case2 무한슬라이드를 하는 경우
        // 맨 처음에 있는 div는 (임시)마지막 배너
        const firstBanner = document.createElement("div");
        // 맨 마지막에 있는 div는 (임시)첫번째 배너
        const lastBanner = document.createElement("div");
        // 배너 불러오기
        const banner = document.querySelector("div.banner");
        // 밑의 버튼 불러오기
        const buttons = document.querySelectorAll("div.buttons button");
        // 카운트 선언
        let count = 0;

        // 1번째 버튼을 temp에 담는다
        let temp = buttons[0];
        // 1번째 버튼색 검은색으로 설정
        temp.style.backgroundColor = "black";

        // 5번째 셋 뒤에 1번째 셋 추가
        lastBanner.innerHTML = `        <div style="display: flex">
            <div class="card">
                <img
                    src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/93e02bd6-4eb9-4a43-af19-0161d1799c01.jpg"
                    alt=""
                />
            </div>
            <div class="card">
                <img
                    src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/d1d93fd8-4c68-48d3-9bad-4cd61ac0bc12.jpeg"
                    alt=""
                />
            </div>
            <div class="card">
                <img
                    src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/989beab5-a26e-4d0c-bf52-1b30ac1fbb47.jpg"
                    alt=""
                />
            </div>
            <div class="card">
                <img
                    src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/4d9591da-48f2-4667-9458-7d23307a0e0e.jpg"
                    alt=""
                />
            </div>
        </div>`;
        banner.appendChild(lastBanner);

        // 1번째 셋 앞에 5번째 셋 추가
        firstBanner.innerHTML = `        <div style="display: flex;">
            <div class="card">
                <img
                    src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/7ce08554-ef0e-4d4f-8741-fdfe94330e7f.jpg"
                    alt=""
                />
            </div>
            <div class="card">
                <img
                    src="https://product-image.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/product/image/a409be8d-99ef-4420-b78f-ac7aa173da92.jpg"
                    alt=""
                />
            </div>
            <div class="card">
                <img
                    src="https://img-cf.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/shop/data/goods/1581658839274l0.jpg"
                    alt=""
                />
            </div>
            <div class="card">
                <img
                    src="https://img-cf.kurly.com/cdn-cgi/image/fit=crop,width=360,height=468,quality=85/shop/data/goods/1645596887681l0.jpg"
                    alt=""
                />
            </div>
        </div>`;
        banner.insertBefore(
            firstBanner,
            document.querySelector("div.banner div")
        );

        // 맨 처음 이미지가 5번이기 때문에
        // 처음부터 5번에서 1번으로 밀어준다
        banner.style.transform = `translate(-1068px)`;

        // 함수로 저장
        const autoSlide = () => {
            // 먼저 카운트 증가
            count++;
            // 0.5초동안 변경
            banner.style.transition = `transform 0.5s`;
            // 1번 앞에 5번이 새로 나왔기 때문에 -1068 * (count + 1) 로 밀기
            banner.style.transform = `translate(${-1068 * (count + 1)}px)`;

            // 카운트가 5에 도달하면
            if (count === 5) {
                // 첫번째 이미지로 옮기기
                setTimeout(() => {
                    // 바로 바꾸기
                    banner.style.transition = `transform 0s`;
                    // (임시)5번 다음 1번으로 옮기기
                    banner.style.transform = `translate(-1068px)`;
                }, 500);
                // 카운트 초기화
                count = 0;
            }
            // temp(첫번째 버튼)의 색을 하얀색으로 변경
            temp.style.backgroundColor = "#fff";
            // 카운트에 해당하는 버튼을 검은색으로 변경
            buttons[count].style.background = "black";
            // 검은색으로 변경한 버튼을 temp에 담는다
            temp = buttons[count];
        };

        // 새로운 id로 setInterval이 매번 실행되니까 let
        // autoSlide()이렇게 실행하면 안되고
        // 함수 주소값만 담는다
        let id = setInterval(autoSlide, 2000);

        // 이전, 다음버튼
        const arrows = document.querySelectorAll("div.arrow");

        // 첫번째로는 클릭되어야하니까 true로 초기값 설정
        let arrowButtonCheck = true;

        // 이전, 다음버튼 둘다 가져왔으니까 forEach 반복문으로 불러와서 이벤트 걸기
        arrows.forEach((arrow) => {
            arrow.addEventListener("click", (e) => {
                // arrowbutton이 true면
                if (arrowButtonCheck) {
                    // false로 바꾸고
                    arrowButtonCheck = false;
                    // interval을 빠져나온다
                    clearInterval(id);
                    // arrowType 저장
                    let arrowType = arrow.classList[1];
                    // arrowType이 left면
                    if (arrowType === "left") {
                        // 카운트 하나 감소
                        count--;
                        // 0.5초동안 변경
                        banner.style.transition = `transform 0.5s`;
                        // {-1068 * (count + 1)}px로 이동
                        banner.style.transform = `translate(${
                            -1068 * (count + 1)
                        }px)`;
                        // 카운트가 -1, (임시)6번으로 이동하면
                        if (count === -1) {
                            setTimeout(() => {
                                // 바로
                                banner.style.transition = `transform 0s`;
                                // 실제 5번째 로 이동
                                banner.style.transform = `translate(-5340px)`;
                            }, 500);
                            // 그리고 카운트를 4로 변경
                            // (count++로 바로 카운트가 올라가기 떄문)
                            count = 4;
                        }
                    } else {
                        // 카운트 증가
                        count++;
                        // 0.5초동안 변경
                        banner.style.transition = `transform 0.5s`;
                        // {-1068 * (count + 1)}px로 이동
                        banner.style.transform = `translate(${
                            -1068 * (count + 1)
                        }px)`;
                        // 카운트가 5, (임시)1번으로 이동하면
                        if (count === 5) {
                            // 0.5초 기다린 뒤
                            setTimeout(() => {
                                // 바로
                                banner.style.transition = `transform 0s`;
                                // 실제 첫번째로 이동
                                banner.style.transform = `translate(-1068px)`;
                            }, 500);
                            // 카운트 초기화
                            count = 0;
                        }
                    }

                    // temp에 담긴 버튼색을 하얀색으로 변경
                    temp.style.backgroundColor = "#fff";
                    // 카운트에 해당하는 버튼을 검은색으로 변경
                    buttons[count].style.background = "black";
                    // 검은색으로 변경한 버튼을 temp에 담는다
                    temp = buttons[count];

                    // 바뀐 setInterval id를 다시 저장
                    id = setInterval(autoSlide, 2000);
                    // 버튼을 0.5초뒤 다시 true로 바꿔준다
                    setTimeout(() => {
                        arrowButtonCheck = true;
                    }, 500);
                }
            });
        });

        // 버튼
        // 버튼 연속클릭을 저지하기위한 buttonCheck true로 선언
        let buttonCheck = true;
        // 버튼들을 통째로 가져왔기때문에 forEach 반복문으로 버튼마다 이벤트리스너를 달아준다
        buttons.forEach((button, i) => {
            button.addEventListener("click", (e) => {
                // buttonCheck가 true일때
                if (buttonCheck) {
                    // false로 바꿔주고
                    buttonCheck = false;
                    // interval 탈출
                    clearInterval(id);

                    // 카운트에 index값 대입
                    count = i;
                    // temp에 담긴 버튼의 버튼색 하얀색으로 변경
                    temp.style.backgroundColor = "#fff";
                    // 카운트에 해당하는 버튼을 검은색으로 변경
                    buttons[count].style.background = "black";

                    // 0.5초동안 변경
                    banner.style.transition = "transform 0.5s";
                    // {-1068 * (count + 1)}px로 이동
                    banner.style.transform = `translate(${
                        -1068 * (count + 1)
                    }px)`;
                    // temp에 카운트에 해당하는 버튼 담기
                    temp = buttons[count];
                    // interval 다시 실행
                    id = setInterval(autoSlide, 2000);

                    // 0.5초뒤 버튼을 true로 변경
                    setTimeout(() => {
                        buttonCheck = true;
                    }, 500);
                }
            });
        });
    </script>
</html>
